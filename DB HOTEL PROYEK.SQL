DROP TABLE CABANG_HOTEL CASCADE CONSTRAINTS PURGE;
DROP TABLE TIPE_KAMAR CASCADE CONSTRAINTS PURGE;
DROP TABLE KAMAR_HOTEL CASCADE CONSTRAINTS PURGE;
DROP TABLE DBOOKING CASCADE CONSTRAINTS PURGE;
DROP TABLE BOOKING CASCADE CONSTRAINTS PURGE;
DROP TABLE GUEST CASCADE CONSTRAINTS PURGE; 
DROP TABLE FASILITAS CASCADE CONSTRAINTS PURGE;
DROP TABLE ISI_FASILITAS CASCADE CONSTRAINTS PURGE;
DROP TABLE EXTRA_FASILITAS CASCADE CONSTRAINTS PURGE;
DROP TABLE JABATAN CASCADE CONSTRAINTS PURGE;
DROP TABLE PEGAWAI CASCADE CONSTRAINTS PURGE;


CREATE TABLE CABANG_HOTEL(
	ID_HOTEL VARCHAR2(3) CONSTRAINT PK_HOTEL PRIMARY KEY,
	NAMA_HOTEL VARCHAR2(50) CONSTRAINT NN_NAMA_HOTEL NOT NULL,
	ALAMAT_HOTEL VARCHAR2(50) CONSTRAINT NN_ALAMAT_HOTEL NOT NULL,
	TELP_HOTEL VARCHAR2(13) CONSTRAINT NN_TELP_HOTEL NOT NULL
);

CREATE TABLE TIPE_KAMAR(
	KODE_TIPE VARCHAR2(3) CONSTRAINT PK_TIPE_KAMAR PRIMARY KEY,
	JENIS_KAMAR VARCHAR2(30) CONSTRAINT NN_JENIS_KAMAR NOT NULL,
	HARGA_KAMAR NUMBER(8) CONSTRAINT NN_HARGA_KAMAR NOT NULL
);

CREATE TABLE FASILITAS(
	ID_FASILITAS VARCHAR2(3) CONSTRAINT PK_ID_FASILITAS PRIMARY KEY,
	NAMA_FASILITAS VARCHAR2(50) CONSTRAINT NN_NAMA_FASILITAS NOT NULL,
	DESKRIPSI VARCHAR2(120),
	HARGA_FASILITAS NUMBER(8) CONSTRAINT NN_HARGA_FASILITAS NOT NULL,
	ADDABLE VARCHAR2(3) CONSTRAINT NN_ADDABLE NOT NULL,
	CONSTRAINT CH_ADDABLE CHECK(ADDABLE='YES' OR ADDABLE='NO')
);

CREATE TABLE ISI_FASILITAS(
	KODE_TIPE VARCHAR2(3) CONSTRAINT FK_KODE_TIPE REFERENCES TIPE_KAMAR(KODE_TIPE),
	ID_FASILITAS VARCHAR2(3) CONSTRAINT FK_ID_FASILITAS REFERENCES FASILITAS(ID_FASILITAS),
	JML_FASILITAS NUMBER(3) CONSTRAINT NN_JML_ISIFASILITAS_PERTIPE NOT NULL,
	CONSTRAINT PK_ISI_FASILITAS PRIMARY KEY (ID_FASILITAS, KODE_TIPE)
);

CREATE TABLE GUEST(
	NIK VARCHAR(16) CONSTRAINT PK_GUEST PRIMARY KEY,
	NAMA VARCHAR2(30) CONSTRAINT NN_NAMA_GUEST NOT NULL,
	EMAIL VARCHAR2(30),
	NOHP_GUEST VARCHAR2(13) CONSTRAINT NN_NOHP_GUEST NOT NULL
);


CREATE TABLE KAMAR_HOTEL(
	ID_KAMAR VARCHAR2(5) CONSTRAINT PK_KAMAR PRIMARY KEY,
	KODE_TIPE VARCHAR2(5) CONSTRAINT FK_KODE_TIPE_KAMAR_HOTEL REFERENCES TIPE_KAMAR(KODE_TIPE),
	ID_HOTEL VARCHAR2(5) CONSTRAINT FK_ID_HOTEL REFERENCES CABANG_HOTEL(ID_HOTEL),
	NOMOR_KAMAR VARCHAR2(3) CONSTRAINT NN_NOMOR_KAMAR NOT NULL,
	STATUS VARCHAR(7) CONSTRAINT NN_STATUS_KAMAR NOT NULL,
	CONSTRAINT CH_STATUS_KAMARHOTEL CHECK(STATUS='OPEN' OR STATUS='CLOSED')
);

CREATE TABLE BOOKING(
	ID_BOOKING VARCHAR2(15) CONSTRAINT PK_BOOKING PRIMARY KEY,
	NIK VARCHAR2(16) CONSTRAINT FK_NIK REFERENCES GUEST(NIK),
	WAKTU_CIN DATE CONSTRAINT NN_CIN_BOOKING NOT NULL,
	WAKTU_COUT DATE CONSTRAINT NN_COUT_BOOKING NOT NULL,
	TOTAL_TRANS NUMBER(12) CONSTRAINT NN_TOTAL_BOOKING NOT NULL,
	BOOK_STATUS VARCHAR2(4) CONSTRAINT NN_BOOK_STATUS NOT NULL,
	CONSTRAINT CH_BOOK_STATUS CHECK(BOOK_STATUS='PAID' OR BOOK_STATUS='DEBT')
);

CREATE TABLE DBOOKING(
	ID_KAMAR VARCHAR2(5) CONSTRAINT FK_ID_KAMAR REFERENCES KAMAR_HOTEL(ID_KAMAR),
	ID_BOOKING VARCHAR2(15) CONSTRAINT FK_ID_BOOKING REFERENCES BOOKING(ID_BOOKING),
	NOMOR_KAMAR VARCHAR2(3) CONSTRAINT NN_NOMOR_KAMAR_DBOOKING NOT NULL,
	HARGA_KAMAR NUMBER(8) CONSTRAINT NN_HARGA_KAMAR_DBOOKING NOT NULL,
	JML_HARI NUMBER(3) CONSTRAINT NN_JML_HARI_BOOKING NOT NULL,
	CONSTRAINT PK_DBOOKING PRIMARY KEY(ID_KAMAR,ID_BOOKING)
);

CREATE TABLE EXTRA_FASILITAS(
	ID_FASILITAS VARCHAR2(3) CONSTRAINT FK_ID_EXTRA_FASILITAS REFERENCES FASILITAS(ID_FASILITAS),
	ID_BOOKING VARCHAR2(15) CONSTRAINT FK_ID_EXTRA_BOOKING REFERENCES BOOKING(ID_BOOKING),
	JML_EXTRA NUMBER(3) CONSTRAINT NN_JML_EXTRAFAS NOT NULL,
	CONSTRAINT PK_EXTRA_FASILITAS PRIMARY KEY(ID_FASILITAS,ID_BOOKING)
);

CREATE TABLE JABATAN(
	ID_JABATAN VARCHAR2(3) CONSTRAINT PK_ID_JABATAN PRIMARY KEY,
	NAMA_JABATAN VARCHAR2(30) CONSTRAINT NN_NAMAJABATAN NOT NULL,
	GAJI_POKOK NUMBER(10) CONSTRAINT NN_GAJI_POKOK NOT NULL
);

CREATE TABLE PEGAWAI(
	ID_PEGAWAI VARCHAR2(5) CONSTRAINT PK_PEGAWAI PRIMARY KEY,
	ID_JABATAN VARCHAR2(3) CONSTRAINT FK_ID_JABATANPEGAWAI REFERENCES JABATAN(ID_JABATAN),
	ID_HOTEL VARCHAR2(3) CONSTRAINT FK_ID_HOTELPEGAWAI REFERENCES CABANG_HOTEL(ID_HOTEL),
	NAMA_PEGAWAI VARCHAR2(30) CONSTRAINT NN_NAMA_PEGAWAI NOT NULL,
	TGLLAHIR_PEGAWAI DATE CONSTRAINT NN_TGLLAHIR_PEGAWAI NOT NULL,
	TELP_PEGAWAI VARCHAR2(13) CONSTRAINT NN_TELPPEGAWAI NOT NULL
);


--insert data--
INSERT INTO CABANG_HOTEL VALUES('C01','CEMPAKA','CEMPAKA 3 NO 22','0817639984322');
INSERT INTO CABANG_HOTEL VALUES('D01','DIPONEGORO','DIPONEGORO NO 183','0877635542339');
INSERT INTO CABANG_HOTEL VALUES('S01','SOEKARNO','DR IR H SOEKARNO KM 158 NO 47','0812233440039');
INSERT INTO CABANG_HOTEL VALUES('B01','BASUKI','BASUKI RAHMAT NO 76','0812637723009');

INSERT INTO TIPE_KAMAR VALUES('K01','STANDART',360000);
INSERT INTO TIPE_KAMAR VALUES('K02','SUPERIOR',580000);
INSERT INTO TIPE_KAMAR VALUES('K03','DELUXE',680000);
INSERT INTO TIPE_KAMAR VALUES('K04','SUITE',850000);
INSERT INTO TIPE_KAMAR VALUES('K05','LUXURY',1250000);

--FASILITAS ADDABLE
INSERT INTO FASILITAS VALUES('F01','EXTRA BED','EXTRA PRIVATE BED FOR 1 PERSON',150000,'YES');
INSERT INTO FASILITAS VALUES('F02','EXTRA BLANKET','EXTRA LARGE BLANKET FOR 1-2 PERSON',50000,'YES');
INSERT INTO FASILITAS VALUES('F03','EXTRA PILLOW','EXTRA PILLOW FOR 1 PERSON',30000,'YES');
INSERT INTO FASILITAS VALUES('F04','EXTRA SLEEPING SET','EXTRA PRIVATE BED FOR 1 PERSON WITH BLANKET AND PILLOW',220000,'YES');
INSERT INTO FASILITAS VALUES('F05','PORTABLE ICEBOX','MINI REFRIGERATOR',75000,'YES');
INSERT INTO FASILITAS VALUES('F06','BATHROOM SET','EXTRA SOAP, SHAMPOO, TOWEL FOR 1 PERSON (APROX. 1 DAY USING)',50000,'YES');
INSERT INTO FASILITAS VALUES('F07','BABY STROLLER','REGULAR STROLLER FOR BABY',70000,'YES');
INSERT INTO FASILITAS VALUES('F08','COFFEE/TEA SET','5 SACHET TEA AND COFFEE WITH WATER HEATER',70000,'YES');
INSERT INTO FASILITAS VALUES('F09','SAFE BOX','SAFETY BOX SIZED 30X30X30',50000,'YES');
--FASILITAS NOT ADDABLE
INSERT INTO FASILITAS VALUES('D01','PRIVATE BED','BED WITH PILLOW AND BLANKET FOR 1 PERSON',0,'NO');
INSERT INTO FASILITAS VALUES('D02','DUO BED','BED WITH PILLOW AND LARGE BLANKET FOR 2 PERSON',0,'NO');
INSERT INTO FASILITAS VALUES('D03','LUXURY BED','LARGE LUXURY BED WITH PILLOW AND BLANKET FOR 1 PERSON',0,'NO');
INSERT INTO FASILITAS VALUES('D04','WIFI','FREE 10MBPS WIFI FOR 1 ROOM',0,'NO');
INSERT INTO FASILITAS VALUES('D05','TV','LARGE HD TELEVISION',0,'NO');
INSERT INTO FASILITAS VALUES('D06','HAIRDRYER','HAIRDRYER',0,'NO');
INSERT INTO FASILITAS VALUES('D07','BATHTUB AND SHOWER','BATHTUB AND SHOWER',0,'NO');
INSERT INTO FASILITAS VALUES('D08','TELEPHONE','TELEPHONE FOR SERVICE AND CALLING',0,'NO');
INSERT INTO FASILITAS VALUES('D09','RADIO','RADIO',0,'NO');
INSERT INTO FASILITAS VALUES('D10','DESK AND CHAIR','STUDY DESK AND CHAIR FOR 1 PERSON',0,'NO');
INSERT INTO FASILITAS VALUES('D11','AC','AIR CONDITIONER',0,'NO');

INSERT INTO ISI_FASILITAS VALUES('K01','D01',2);
INSERT INTO ISI_FASILITAS VALUES('K01','D04',1);
INSERT INTO ISI_FASILITAS VALUES('K01','D05',1);
INSERT INTO ISI_FASILITAS VALUES('K01','D06',1);
INSERT INTO ISI_FASILITAS VALUES('K01','D07',1);
INSERT INTO ISI_FASILITAS VALUES('K01','D08',1);
INSERT INTO ISI_FASILITAS VALUES('K01','D10',1);
INSERT INTO ISI_FASILITAS VALUES('K01','D11',1);
INSERT INTO ISI_FASILITAS VALUES('K01','F06',2);
INSERT INTO ISI_FASILITAS VALUES('K01','F08',1);